<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subtraction Kinesthetic Task 2</title>
    <style>
        body { font-family: Inter, Segoe UI, Roboto, Arial, Helvetica, sans-serif; background:#f6f9fc; margin:0; padding:20px; display:flex; flex-direction:column; align-items:center; }
        .wrapper { width: 720px; max-width: 95vw; background:#fff; border:2px solid #6C8EF3; border-radius:16px; padding:20px; box-shadow:0 6px 20px rgba(0,0,0,0.1); }
        .title { font-weight:700; margin:0 0 6px 0; color:#2c3e50; font-size:20px; }
        .instructions { margin:0 0 16px 0; color:#546e7a; font-size:16px; }
        .board { display:flex; gap:16px; }
        .column { flex:1; border:2px dashed #b0c4ff; border-radius:12px; background:#f2f6ff; min-height:260px; padding:12px; }
        .column h3 { margin:6px 6px 12px 6px; color:#2c3e50; font-size:16px; }
        .pool { display:flex; flex-wrap:wrap; gap:8px; }
        .item { width:56px; height:56px; display:flex; align-items:center; justify-content:center; font-size:32px; background:#fff; border:2px solid #6C8EF3; border-radius:10px; cursor:grab; user-select:none; }
        .item.dragging { opacity:0.7; }
        .dropzone { display:flex; flex-wrap:wrap; gap:8px; min-height:200px; }
        .success { display:none; margin-top:14px; padding:10px 12px; background:#e8f5e8; color:#2e7d32; border:2px solid #2e7d32; border-radius:10px; font-weight:700; }
        .count-display { font-size:18px; font-weight:bold; color:#6C8EF3; margin-top:10px; }
    </style>
</head>
<body>
    <div class="wrapper">
        <h2 class="title">‚ûñ Subtraction: Main Box has 6 stars ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê. Remove 3 stars ‚≠ê‚≠ê‚≠ê</h2>
        <p class="instructions">Drag 6 stars into the Main Box first, then drag 3 stars to the Remove Box. Count how many stars remain!</p>
        <div class="board">
            <div class="column">
                <h3>Stars ‚≠ê</h3>
                <div id="pool" class="pool"></div>
            </div>
            <div class="column">
                <h3>Main Box</h3>
                <div id="target" class="dropzone" aria-label="drop target"></div>
                <div class="count-display">Count: <span id="count">0</span></div>
            </div>
            <div class="column">
                <h3>Remove Box</h3>
                <div id="remove" class="dropzone" aria-label="remove target"></div>
                <div class="count-display">Removed: <span id="removed">0</span></div>
            </div>
        </div>
        <div id="done" class="success" style="display:none">üéâ Great job! You have <span id="remaining">0</span> stars remaining!</div>
    </div>
    <script>
        const ITEM_EMOJI = '‚≠ê';
        const POOL_TOTAL = 10;
        const TARGET_COUNT = 6;
        const REMOVE_COUNT = 3;

        const pool = document.getElementById('pool');
        const target = document.getElementById('target');
        const remove = document.getElementById('remove');
        const done = document.getElementById('done');
        const countDisplay = document.getElementById('count');
        const removedDisplay = document.getElementById('removed');
        const remainingDisplay = document.getElementById('remaining');

        function makeItem(){
            const el = document.createElement('div');
            el.className = 'item';
            el.textContent = ITEM_EMOJI;
            el.draggable = true;
            el.addEventListener('dragstart', e => {
                el.classList.add('dragging');
                e.dataTransfer.setData('text/plain', 'item');
            });
            el.addEventListener('dragend', () => el.classList.remove('dragging'));
            return el;
        }

        for(let i=0;i<POOL_TOTAL;i++) pool.appendChild(makeItem());

        function enable(zone){
            zone.addEventListener('dragover', e => { e.preventDefault(); });
            zone.addEventListener('drop', e => {
                e.preventDefault();
                const dragging = document.querySelector('.item.dragging');
                if(dragging && dragging.parentElement !== zone){ 
                    zone.appendChild(dragging); 
                    updateCount();
                }
            });
        }
        enable(pool); enable(target); enable(remove);

        function updateCount(){
            const mainCount = target.querySelectorAll('.item').length;
            const removedCount = remove.querySelectorAll('.item').length;
            const remaining = mainCount - removedCount;
            
            countDisplay.textContent = mainCount;
            removedDisplay.textContent = removedCount;
            remainingDisplay.textContent = remaining;
            
            if(mainCount >= TARGET_COUNT && removedCount >= REMOVE_COUNT){
                done.style.display = 'block';
                if(window.parent!==window){ 
                    window.parent.postMessage('task_completed','*'); 
                }
            }
        }
    </script>
</body>
</html>

