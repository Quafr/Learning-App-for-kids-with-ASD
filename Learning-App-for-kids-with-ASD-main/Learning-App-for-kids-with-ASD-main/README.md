# Adaptive Learning App with Emotion Tracking

A complete, privacy-first learning system designed to support diverse learning preferences for children with Autism Spectrum Disorder (ASD). The system includes a browser-based learning app, practice modules for addition and subtraction, real-time emotion tracking, frustration analysis, and local analytics. The system adapts presentation (visual, auditory, kinesthetic) based on performance and affect.

## Creators

This project was created for research purposes by:
- Ahnaf Bin Asraf
- Iwrsiya Nawar
- Syed Quafshat Taiyush Hamd

## Key Features

- **Adaptive Learning**: Automatically switches between visual, auditory, and kinesthetic modes based on learner performance
- **Real-time Emotion Tracking**: Uses DeepFace + MediaPipe for facial emotion detection (with fallback to simulation)
- **Frustration Analysis**: Monitors learner frustration and adapts mode selection accordingly
- **Interactive Practice Apps**: Separate modules for addition and subtraction practice
- **Local Data Processing**: All processing happens locally - no data is transmitted externally
- **CSV Data Logging**: Transparent logging of learning sessions and practice data
- **ITS Analysis**: Generates Interrupted Time Series plots for research analysis
- **Accessible UI**: Professional, learner-friendly interface with accessible design

## System Requirements

- **Python**: 3.7 or higher
- **Webcam**: Optional, for emotion tracking (app falls back to simulation if unavailable)
- **OS**: Windows, macOS, or Linux with camera permissions (if using advanced tracking)
- **Browser**: Modern web browser (Chrome, Firefox, Edge, Safari)

## Installation

1. **Clone the repository**:
   ```bash
   git clone <repository-url>
   cd Learning-App-for-kids-with-ASD-main
   ```

2. **Create and activate a virtual environment** (recommended):
   ```bash
   python -m venv venv
   # On Windows:
   venv\Scripts\activate
   # On macOS/Linux:
   source venv/bin/activate
   ```

3. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

4. **View dependencies**:
   ```bash
   python list_dependencies.py
   ```

## Project Structure

```
.
├── learning_webapp.py              # Main Flask web application
├── run_learning_webapp.py          # Launcher for the learning webapp
├── run_addition_app.py             # Launcher for addition practice
├── run_subtraction_app.py          # Launcher for subtraction practice
├── emotion_tracker_webapp.py       # Advanced emotion tracking (DeepFace + MediaPipe)
├── emotion_tracker_simple.py       # Lightweight tracker (simulation)
├── frustration_webapp.py           # Frustration analysis for the webapp
├── preferred_mode_analyzer.py      # Determines preferred mode from reports
├── generate_its_reports.py         # Generates ITS plots for analysis
├── list_dependencies.py            # Lists all dependencies and tools
├── templates/                      # HTML templates
│   ├── learning_index.html         # Homepage for learning webapp
│   ├── learning.html               # Main learning interface
│   ├── addition_learning.html      # Addition learning examples
│   ├── addition_practice_emotion.html
│   ├── subtraction_learning.html
│   └── subtraction_practice_emotion.html
├── tasks/                          # Interactive kinesthetic task HTML files
│   ├── kinesthetic_task_*.html      # Main learning app tasks
│   ├── addition_kinesthetic_*.html  # Addition practice tasks
│   └── subtraction_kinesthetic_*.html # Subtraction practice tasks
├── questions.csv                   # Sample questions for the learning app
├── preferred_modes.csv             # Output: inferred preferred modes (template)
├── outputs/                        # Generated ITS plots (gitignored)
├── requirements.txt                # Python dependencies
├── .gitignore                      # Git ignore rules
└── README.md                       # This file
```

## Components

### 1. Learning WebApp (`learning_webapp.py`, `run_learning_webapp.py`)

Main Flask application providing learning activities in visual, auditory, and kinesthetic modes. Automatically progresses through all three modes and generates frustration reports.

- **Default port**: 5002
- **Launch**:
  ```bash
  python run_learning_webapp.py
  # Opens http://localhost:5002 automatically
  ```
- **Features**:
  - Auto-progression through visual → auditory → kinesthetic modes
  - Real-time emotion tracking during questions
  - Automatic frustration analysis after each mode
  - Automatic preferred mode analyzer execution after completion

### 2. Preferred Mode Analyzer (`preferred_mode_analyzer.py`)

Analyzes frustration reports to identify each learner's lowest-frustration mode.

- **Inputs**: `frustration_report{learner_id}.csv` (generated by learning webapp)
- **Output**: `preferred_modes.csv`
- **Run**:
  ```bash
  python preferred_mode_analyzer.py
  # Automatically processes all frustration_report*.csv files
  ```
- **Manual mode**:
  ```bash
  python preferred_mode_analyzer.py <input_csv> <output_csv>
  ```

### 3. Addition Practice (`run_addition_app.py`)

Addition practice delivered in the learner's preferred mode with emotion tracking during questions.

- **Default port**: 5001
- **Launch**:
  ```bash
  python run_addition_app.py
  # Opens http://localhost:5001 automatically
  ```
- **Features**:
  - Uses preferred mode from `preferred_modes.csv`
  - Real-time emotion tracking
  - Interactive kinesthetic tasks
  - CSV logging to `addition_practice_log{learner_id}.csv`
  - Inactivity monitoring with mode cycling

### 4. Subtraction Practice (`run_subtraction_app.py`)

Subtraction learning and practice following the same pattern as addition.

- **Default port**: 5003
- **Launch**:
  ```bash
  python run_subtraction_app.py
  # Opens http://localhost:5003 automatically
  ```
- **Features**:
  - Uses preferred mode from `preferred_modes.csv`
  - Real-time emotion tracking
  - Interactive kinesthetic tasks
  - CSV logging to `subtraction_practice_log{learner_id}.csv`
  - Inactivity monitoring with mode cycling

### 5. Emotion Tracking

- **Advanced**: `emotion_tracker_webapp.py` (DeepFace + MediaPipe via OpenCV)
  - Requires: webcam, opencv-python, deepface, mediapipe
  - Provides real-time facial emotion detection
- **Simple**: `emotion_tracker_simple.py` (simulation, no camera required)
  - Fallback when advanced libraries are unavailable
  - Simulates emotion detection for testing

The apps automatically fall back to the simple tracker if advanced libraries are unavailable.

### 6. Frustration Analysis (`frustration_webapp.py`)

Computes frustration scores per test/mode based on:
- Error/skip rate (45% weight)
- Response time pressure (25% weight)
- Emotion valence (30% weight)

Generates `frustration_report{learner_id}.csv` with per-mode frustration scores.

### 7. ITS Report Generation (`generate_its_reports.py`)

Generates Interrupted Time Series (ITS) plots showing frustration over time with intervention points.

- **Inputs**: Practice log CSVs (`addition_practice_log*.csv`, `subtraction_practice_log*.csv`)
- **Outputs**: `outputs/its_addition_{learner_id}.png`, `outputs/its_subtraction_{learner_id}.png`
- **Run**:
  ```bash
  python generate_its_reports.py
  ```

## Data Files

### Input Files (Included)
- `questions.csv`: Sample questions for the learning webapp (visual, auditory, kinesthetic)

### Output Files (Generated, Gitignored)
- `learner_log{learner_id}.csv`: Learning session data
- `addition_practice_log{learner_id}.csv`: Addition practice session data
- `subtraction_practice_log{learner_id}.csv`: Subtraction practice session data
- `frustration_report{learner_id}.csv`: Frustration scores per mode
- `preferred_modes.csv`: Inferred preferred learning modes
- `inactivity_thresholds.json`: Computed inactivity thresholds
- `outputs/its_*.png`: Generated ITS analysis plots

## Complete Workflow

1. **Start the learning webapp**:
   ```bash
   python run_learning_webapp.py
   ```
   - Complete all three modes (visual, auditory, kinesthetic)
   - Frustration reports are generated automatically
   - Preferred mode analyzer runs automatically after completion

2. **Start addition practice** (uses preferred mode):
   ```bash
   python run_addition_app.py
   ```

3. **Start subtraction practice** (uses preferred mode):
   ```bash
   python run_subtraction_app.py
   ```

4. **Generate ITS reports** (optional):
   ```bash
   python generate_its_reports.py
   ```

## Privacy and Security

- **100% Local Processing**: All emotion tracking and data processing happens on your device
- **No External Transmission**: No data is sent to external servers
- **Camera Access**: Only used during active learning sessions
- **Data Control**: All CSV files are stored locally and can be deleted at any time
- **User Data Excluded**: User-generated CSV files are gitignored

## Dependencies

View complete dependency list:
```bash
python list_dependencies.py
```

### Core Dependencies
- **Flask** (2.3.3): Web framework
- **pandas** (2.1.1): Data processing
- **numpy** (>=1.24.0): Numerical computing
- **opencv-python** (4.8.1.78): Computer vision
- **deepface** (0.0.79): Facial recognition
- **mediapipe** (0.10.7): Media processing
- **matplotlib** (3.7.2): Plotting
- **scipy** (1.11.1): Scientific computing

See `requirements.txt` for complete list.

## Troubleshooting

### Camera Issues
- Ensure camera permissions are granted to Python
- Check that no other app is using the camera
- App will automatically fall back to simulation mode if camera is unavailable

### Port Conflicts
- Close other processes using ports 5001, 5002, or 5003
- Or modify port numbers in the launcher files

### Dependency Issues
- Reinstall with: `pip install -r requirements.txt`
- Some packages (deepface, mediapipe) may require additional system dependencies
- Check package documentation for system requirements

### Python Version
- Verify with: `python --version` (3.7+ required)

### Missing CSV Files
- Ensure you've completed at least one learning session
- Check that `preferred_modes.csv` exists (created by preferred_mode_analyzer)
- Practice apps require `preferred_modes.csv` to determine learning mode

## Notes on Accessibility and Design

- **Calm, Professional UI**: Accessible typography and color contrast
- **Clear Navigation**: Consistent layout and intuitive flow
- **Immediate Feedback**: Unambiguous responses to user actions
- **Responsive Design**: Works on different screen sizes
- **Keyboard Accessible**: Supports keyboard navigation

## License

This project is provided for research and educational use. See `LICENSE` file for details.

## Contributing

This is a research project. For contributions or questions, please contact the project creators.

## Additional Resources

- **Dependency Information**: Run `python list_dependencies.py` for detailed dependency list
- **ITS Analysis**: See `generate_its_reports.py` for analysis methodology
- **Frustration Scoring**: See `frustration_webapp.py` for scoring algorithm details
